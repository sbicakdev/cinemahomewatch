{% extends "core/base.html" %}

{% block title %}{{ movie.title }} - Detalji{% endblock %}

{% block content %}
    <h1>{{ movie.title }}</h1>
    <p>{{ movie.description }}</p>
    <p>Trajanje: {{ movie.duration }} min</p>
    <img src="{{ movie.poster_url }}" alt="Poster" style="width: 300px;">

    <h2>Showtimes:</h2>
    <ul>
        {% for showtime in showtimes %}
            <li>{{ showtime.showtime }} - {{ showtime.cinema.name }}</li>
        {% empty %}
            <li>Nema dostupnih termina.</li>
        {% endfor %}
    </ul>

    <h2>Prosječna ocjena:</h2>
    {% if average_rating %}
        <p><strong>{{ average_rating }}</strong> / 5</p>
    {% else %}
        <p>Nema ocjena još.</p>
    {% endif %}

    <h2>Recenzije:</h2>
    {% if reviews %}
        <ul>
            {% for review in reviews %}
                <li>
                    <strong>{{ review.user.username }}</strong> ({{ review.created_at|date:"d.m.Y H:i" }})<br>
                    Ocjena: {{ review.rating }} / 5<br>
                    Komentar: {{ review.comment }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Nema recenzija još.</p>
    {% endif %}

    <h2>Dodaj recenziju:</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Pošalji recenziju</button>
    </form>
{% endblock %}
